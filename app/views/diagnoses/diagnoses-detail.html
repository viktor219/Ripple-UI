<div class="transbox">
  <div class="innerTransbox">
    <h3><strong>Problem and Diagnosis</strong></h3>

    <div class="form-horizontal text-left">

      <div ng-if="!diagnosis.metaData">
        <div class="form-group form-group-sm">
          <label class="control-label col-md-3">Problem / Diagnosis:</label>
          <div class="col-md-9">
            <div class="form-control-static">{{ diagnosis.problem }}</div>
          </div>
        </div>

        <div class="form-group form-group-sm">
          <label class="control-label col-md-12">Description:</label>
          <div class="col-md-12">
            <div class="form-control-static">{{ diagnosis.description }}</div>
          </div>
        </div>

        <div class="form-group form-group-sm">
          <label class="control-label col-md-3">Date of Onset:</label>
          <div class="col-md-9">
            <div class="form-control-static">{{ diagnosis.dateOfOnset | date: 'dd-MMM-yyyy' }}</div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12">
            <span class="patientSummary-spinner" us-spinner="{radius:20, width:8, length: 16}" spinner-key="diagnosisDetail-spinner" spinner-start-active="true"></span>
          </div>
        </div>

        <div class="form-group form-group-sm">
          <label class="control-label col-md-3">Terminology:</label>
          <div class="col-md-9">
            <div class="form-control-static">{{ diagnosis.terminology }}</div>
          </div>
        </div>

        <div class="form-group form-group-sm">
          <label class="control-label col-md-3">Code:</label>
          <div class="col-md-9">
            <div class="form-control-static">{{ diagnosis.code }}</div>
          </div>
        </div>
      </div>

      <div ng-if="diagnosis.metaData">
        <div class="form-group form-group-sm" ng-repeat="(key, prop) in diagnosis.metaData track by key">
          <label class="control-label col-md-3">{{convertToLabel(key)}}</label>
          <div class="col-md-9">
            <div class="form-control-static">{{prop}}</div>
          </div>
        </div>
      </div>

    <div class="form-horizontal text-left">
      <div class="form-group form-group-sm">
        <label class="control-label col-md-3">Author:</label>
        <div class="col-md-9">
          <div class="form-control-static">{{ diagnosis.author }}</div>
        </div>
      </div>
    </div>

    <div class="form-horizontal text-left">
      <div class="form-group form-group-sm">
        <label class="control-label col-md-3">Date Created:</label>
        <div class="col-md-9">
          <div class="form-control-static">{{ diagnosis.dateCreated | date:'y-MM-dd'}}</div>
        </div>
      </div>
    </div>

      <div class="form-group form-group-sm">
        <label class="control-label col-md-3">Source:</label>
        <div class="col-md-9">
          <div class="form-control-static">{{diagnosis.source}}
            <div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<div ng-if="diagnosis.source !== 'vista'" class="form-group form-group-sm text-right" ng-if="currentUser.permissions.indexOf('WRITE') !== -1">
  <button class="btn btn-info" ng-click="edit();"><i class="fa fa-pencil"></i> Edit</button>
</div>
